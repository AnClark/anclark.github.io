<!DOCTYPE html>
<html lang="zh_CN" >
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<title>在OpenWrt路由器上使用IPv6 - 爱拼安小匠的技术博客</title>
    <link rel="alternate" href="" type="application/atom+xml"/>
	<link rel="shortcut icon" href=""/>
	
<link rel="stylesheet" href="/css/style.css">

	
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
	<div class="main-con">

        <div class="nav cl">
    <ul class="cl nav-list">
        <!-- Customizable nav bar -->
        
            
            <li>
                
                    <a href="/" class="">
                        <i class="fa fa-home"></i> 
                        <span>主页</span>
                    </a>
                
            </li>
            
        
            
            <li>
                
                    <a href="/archives/" class="">
                        <i class=" fa-"></i> 
                        <span>归档</span>
                    </a>
                
            </li>
            
        
            
            <li>
                
                    
                    <a href="javascript:void(0)" class="">
                    
                        <i class=" fa-"></i> 
                        <span>关于</span>
                        <span class="drop-flag fa fa-angle-down"></span>
                    </a>
                    <dl>
                        
                            <li>
                                <a href="/about" class="">
                                    <i class=" fa-"></i>
                                    <span>关于本站</span>
                                </a>
                            </li>
                        
                    </dl>
                
            </li>
            
        
            
            <!-- Language switcher -->

    <li>
        <a href="javascript:void(0)">
            <i class="fa fa-language"></i> 
            
            <span>简体中文</span>
            
            <span class="drop-flag fa fa-angle-down"></span>
        </a>
        <dl>
            
                <li>
                    
                    <a href="/" class="">
                    
                        <i class="fa fa-circle"></i>
                        <span>简体中文</span>
                    </a>
                </li>
            
                <li>
                    
                    <a href="/en/" class="">
                    
                        <i class="fa fa-circle"></i>
                        <span>English</span>
                    </a>
                </li>
            
        </dl>
    </li>

            
        
    </ul>

    <ul class="cl nav-tool">
        
            <li>
                <a href="/github">
                    <i class="fa fa-github"></i>
                </a>
            </li>
        
            <li>
                <a href="/mail">
                    <i class="fa fa-envelope"></i>
                </a>
            </li>
        
            <li>
                <a href="/twitter">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
        
        <li>
            <a href="javascript:void(0)" class="nav-search-btn">
                <i class="fa fa-search"></i>
            </a>
        </li>
        
    </ul>
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="nav-search"><input type="search" name="q" class="nav-search-input" placeholder="search..."><input type="hidden" name="sitesearch" value="https://anclark.github.io"></form>
</div>

        <header class="top" id="fallEle" style="background-image: url(/imgs/head.jpg)">
    <i class="fa fa-bars" id="media-toggle" style="display: none"></i>
    <div class="top-info cl fadeToBottom">
        <h2 class="site-name">
            <a href="/">
                
                    爱拼安小匠的技术博客
                
            </a>
            <small id="type-data">
                
                    
                
            </small>
        </h2>
    </div>
</header>

        <div class="con-wrap fadeToTop">
    
    <section class="article-area">
    
        <article class="article">
    <div class="article-wrap">
        
            <h2 class="article-title cl">
                在OpenWrt路由器上使用IPv6
            </h2>
        

        <ul class="article-extra" style="margin-bottom: 20px">
            
            <li class="article-time">
                2018-11-12
            </li>
            

            
                
                <li class="article-category">
                    <ol class="category-list cl">
                        <i class="fa fa-folder-o"></i>
                        
                            
                            <li><a href="/categories/网络/">网络</a></li>
                            
                        
                            
                        
                    </ol>
                </li>
                
            


        </ul>
        <div class="article-description">
            
            <p>现在的教育网和宽带基本都提供了IPv6支持。但是，由于网络性质使然，IPv6并不能像IPv4那样，直接使用路由器共享，这使得路由器接入IPv6后，所有连接到路由器的设备都不能连接v6。</p>
<p>为此，必须对路由器进行一番魔改。如果路由器使用的是OpenWrt，或基于OpenWrt的固件，那么在经过一番设置后，IPv6的共享就不再是传说了。</p>
<span id="more"></span>

<h2 id="设置脚本"><a href="#设置脚本" class="headerlink" title="设置脚本"></a>设置脚本</h2><p>为了方便路由器的配置，<strong>我将所有设置过程做成了一个脚本，并在GitHub上开源。</strong></p>
<blockquote>
<p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/AnClark/OpenWrt-IPv6-Scripts">https://github.com/AnClark/OpenWrt-IPv6-Scripts</a></p>
<p>脚本地址：<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/AnClark/OpenWrt-IPv6-Scripts/master/Use%20ip6tables/operation.sh">戳这里直接下载，脚本文件名为<code>operation.sh</code></a></p>
</blockquote>
<p>使用脚本的步骤很简单，只要你准备好用于发送文件的WinSCP，与用于远程登录路由器的PuTTY。</p>
<ul>
<li><strong>第一步</strong>，使用WinSCP，登录到路由器上，并将<code>operation.sh</code>上传到<code>/tmp</code>文件夹中。</li>
<li><strong>第二步</strong>，使用PuTTY或WinSCP自带的Shell，运行<code>/tmp/operation.sh</code>。稍等片刻，即可配置好。下次重启路由器，就可以自动将WAN的IPv6共享给路由器局域网内的设备了。</li>
</ul>
<p>如果使用Linux，或在Windows下使用Cygwin或Git-SCM（一个在Windows下使用Git的套件），那么使用它们自带的<code>scp</code>和<code>ssh</code>工具，会方便得多：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将脚本发送到路由器上。注意路由器地址</span><br>scp operation.sh root@192.168.1.1:/tmp/<br><span class="hljs-comment"># 在路由器上运行脚本</span><br>ssh root@192.168.1.1 <span class="hljs-string">&quot;chmod +x /tmp/install.sh; sh /tmp/operation.sh&quot;</span><br></code></pre></td></tr></table></figure>

<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>脚本完成的设置过程，包括了如下具体操作：</p>
<h3 id="（1）安装kmod-ipt-nat6"><a href="#（1）安装kmod-ipt-nat6" class="headerlink" title="（1）安装kmod-ipt-nat6"></a>（1）安装<code>kmod-ipt-nat6</code></h3><p><code>kmod-ipt-nat6</code>是用于启用IPv6 NAT的内核模块。在OpenWrt中，使用包管理工具<code>opkg</code>进行安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">opkg update<br>opkg install kmod-ipt-nat6<br></code></pre></td></tr></table></figure>

<h3 id="（2）更改IPv6-ULA前缀"><a href="#（2）更改IPv6-ULA前缀" class="headerlink" title="（2）更改IPv6 ULA前缀"></a>（2）更改IPv6 ULA前缀</h3><p>ULA，全称为“唯一的本地IPv6单播地址”（Unique Local IPv6 Unicast Address）[^1]。这一步，我们要把它的前缀由<code>f</code>改为<code>d</code>，以将本地的IPv6地址向外广播，而不是localhost那样的闭环。</p>
<p>用于实现这一步的脚本如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">uci <span class="hljs-built_in">set</span> network.globals.ula_prefix=<span class="hljs-string">&quot;<span class="hljs-subst">$(uci get network.globals.ula_prefix | sed &#x27;s/^./d/&#x27;)</span>&quot;</span><br>uci commit network<br></code></pre></td></tr></table></figure>

<p>OpenWrt的属性参数由<code>uci</code>工具管理，类似于Android的property机制（<code>setprop</code>/<code>getprop</code>），使用“域”来组织各类参数。脚本的第一行，在<code>$()</code>中调用<code>uci</code>命令，获取当前的ULA前缀，将执行结果传递给<code>sed</code>命令。这里<code>sed</code>命令使用了替换语法——<code>sed &#39;s/&lt;原文本&gt;/&lt;替换文本&gt;/&#39;</code>，将开头第一个字符替换为字符“<code>d</code>”。Shell的<code>$()</code>语法可将命令运行结果作为文本使用，那么该用法内的命令结果就作为新的ULA前缀被应用。最后，运行第二行的命令，提交修改。</p>
<h3 id="（3）将DHCP服务器模式设置为“总是广播默认路由”"><a href="#（3）将DHCP服务器模式设置为“总是广播默认路由”" class="headerlink" title="（3）将DHCP服务器模式设置为“总是广播默认路由”"></a>（3）将DHCP服务器模式设置为“总是广播默认路由”</h3><p>如果没猜错的话，DHCP服务器模式设置为“总是广播默认路由”，可让内网中的设备能够快速获取IPv6地址。但该选项的具体原理还得查查OpenWrt的文档。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">uci <span class="hljs-built_in">set</span> dhcp.lan.ra_default=<span class="hljs-string">&#x27;1&#x27;</span><br>uci commit dhcp<br></code></pre></td></tr></table></figure>

<h3 id="（4）添加NAT6初始化脚本"><a href="#（4）添加NAT6初始化脚本" class="headerlink" title="（4）添加NAT6初始化脚本"></a>（4）添加NAT6初始化脚本</h3><p>NAT6初始化脚本的作用，就是在路由器启动时自动开启IPv6的NAT功能。该脚本保存到<code>/etc/init.d/nat6</code>中，在我的脚本中使用<code>bash</code>的Here Document功能来创建它。</p>
<p>NAT6的内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh /etc/rc.common</span><br><span class="hljs-comment"># NAT6 init script for OpenWrt // Depends on package: kmod-ipt-nat6</span><br><br>START=55<br><br><span class="hljs-comment"># Options</span><br><span class="hljs-comment"># -------</span><br><br><span class="hljs-comment"># Use temporary addresses (IPv6 privacy extensions) for outgoing connections? Yes: 1 / No: 0</span><br>PRIVACY=1<br><br><span class="hljs-comment"># Maximum number of attempts before this script will stop in case no IPv6 route is available</span><br><span class="hljs-comment"># This limits the execution time of the IPv6 route lookup to (MAX_TRIES+1)*(MAX_TRIES/2) seconds. The default (15) equals 120 seconds.</span><br>MAX_TRIES=15<br><br><span class="hljs-comment"># An initial delay (in seconds) helps to avoid looking for the IPv6 network too early. Ideally, the first probe is successful.</span><br><span class="hljs-comment"># This would be the case if the time passed between the system log messages &quot;Probing IPv6 route&quot; and &quot;Setting up NAT6&quot; is 1 second.</span><br>DELAY=5<br><br><span class="hljs-comment"># Logical interface name of outbound IPv6 connection</span><br><span class="hljs-comment"># There should be no need to modify this, unless you changed the default network interface names</span><br><span class="hljs-comment"># Edit by Vincent: I never changed my default network interface names, but still I have to change the WAN6_NAME to &quot;wan&quot; instead of &quot;wan6&quot;</span><br>WAN6_NAME=<span class="hljs-string">&quot;wan6&quot;</span><br><br><span class="hljs-comment"># ---------------------------------------------------</span><br><span class="hljs-comment"># Options end here - no need to change anything below</span><br><br><span class="hljs-function"><span class="hljs-title">boot</span></span>() &#123;<br>        [ <span class="hljs-variable">$DELAY</span> -gt 0 ] &amp;&amp; sleep <span class="hljs-variable">$DELAY</span><br>        logger -t NAT6 <span class="hljs-string">&quot;Probing IPv6 route&quot;</span><br>        PROBE=0<br>        COUNT=1<br>        <span class="hljs-keyword">while</span> [ <span class="hljs-variable">$PROBE</span> -eq 0 ]<br>        <span class="hljs-keyword">do</span><br>                <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$COUNT</span> -gt <span class="hljs-variable">$MAX_TRIES</span> ]<br>                <span class="hljs-keyword">then</span><br>                        logger -t NAT6 <span class="hljs-string">&quot;Fatal error: No IPv6 route found (reached retry limit)&quot;</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br>                <span class="hljs-keyword">fi</span><br>                sleep <span class="hljs-variable">$COUNT</span><br>                COUNT=$((COUNT+<span class="hljs-number">1</span>))<br>                PROBE=$(route -A inet6 | grep -c <span class="hljs-string">&#x27;::/0&#x27;</span>)<br>        <span class="hljs-keyword">done</span><br> <br>        logger -t NAT6 <span class="hljs-string">&quot;Setting up NAT6&quot;</span><br> <br>        WAN6_INTERFACE=$(uci get <span class="hljs-string">&quot;network.<span class="hljs-variable">$WAN6_NAME</span>.ifname&quot;</span>)<br>        <span class="hljs-keyword">if</span> [ -z <span class="hljs-string">&quot;<span class="hljs-variable">$WAN6_INTERFACE</span>&quot;</span> ] || [ ! -e <span class="hljs-string">&quot;/sys/class/net/<span class="hljs-variable">$WAN6_INTERFACE</span>/&quot;</span> ] ; <span class="hljs-keyword">then</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Fatal error: Lookup of <span class="hljs-variable">$WAN6_NAME</span> interface failed. Were the default interface names changed?&quot;</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br>        <span class="hljs-keyword">fi</span><br>        WAN6_GATEWAY=$(route -A inet6 -e | grep <span class="hljs-string">&quot;<span class="hljs-variable">$WAN6_INTERFACE</span>&quot;</span> | awk <span class="hljs-string">&#x27;/::\/0/&#123;print $2; exit&#125;&#x27;</span>)<br>        <span class="hljs-keyword">if</span> [ -z <span class="hljs-string">&quot;<span class="hljs-variable">$WAN6_GATEWAY</span>&quot;</span> ] ; <span class="hljs-keyword">then</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Fatal error: No IPv6 gateway for <span class="hljs-variable">$WAN6_INTERFACE</span> found&quot;</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br>        <span class="hljs-keyword">fi</span><br>        LAN_ULA_PREFIX=$(uci get network.globals.ula_prefix)<br>        <span class="hljs-keyword">if</span> [ $(<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$LAN_ULA_PREFIX</span>&quot;</span> | grep -c -E <span class="hljs-string">&quot;^([0-9a-fA-F]&#123;4&#125;):([0-9a-fA-F]&#123;0,4&#125;):&quot;</span>) -ne 1 ] ; <span class="hljs-keyword">then</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Fatal error: IPv6 ULA prefix <span class="hljs-variable">$LAN_ULA_PREFIX</span> seems invalid. Please verify that a prefix is set and valid.&quot;</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br>        <span class="hljs-keyword">fi</span><br> <br>        ip6tables -t nat -I POSTROUTING -s <span class="hljs-string">&quot;<span class="hljs-variable">$LAN_ULA_PREFIX</span>&quot;</span> -o <span class="hljs-string">&quot;<span class="hljs-variable">$WAN6_INTERFACE</span>&quot;</span> -j MASQUERADE<br>        <span class="hljs-keyword">if</span> [ $? -eq 0 ] ; <span class="hljs-keyword">then</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Added IPv6 masquerading rule to the firewall (Src: <span class="hljs-variable">$LAN_ULA_PREFIX</span> - Dst: <span class="hljs-variable">$WAN6_INTERFACE</span>)&quot;</span><br>        <span class="hljs-keyword">else</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Fatal error: Failed to add IPv6 masquerading rule to the firewall (Src: <span class="hljs-variable">$LAN_ULA_PREFIX</span> - Dst: <span class="hljs-variable">$WAN6_INTERFACE</span>)&quot;</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br>        <span class="hljs-keyword">fi</span><br> <br>        route -A inet6 add 2000::/3 gw <span class="hljs-string">&quot;<span class="hljs-variable">$WAN6_GATEWAY</span>&quot;</span> dev <span class="hljs-string">&quot;<span class="hljs-variable">$WAN6_INTERFACE</span>&quot;</span><br>        <span class="hljs-keyword">if</span> [ $? -eq 0 ] ; <span class="hljs-keyword">then</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Added <span class="hljs-variable">$WAN6_GATEWAY</span> to routing table as gateway on <span class="hljs-variable">$WAN6_INTERFACE</span> for outgoing connections&quot;</span><br>        <span class="hljs-keyword">else</span><br>                logger -t NAT6 <span class="hljs-string">&quot;Error: Failed to add <span class="hljs-variable">$WAN6_GATEWAY</span> to routing table as gateway on <span class="hljs-variable">$WAN6_INTERFACE</span> for outgoing connections&quot;</span><br>        <span class="hljs-keyword">fi</span><br> <br>        <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$PRIVACY</span> -eq 1 ] ; <span class="hljs-keyword">then</span><br>                <span class="hljs-built_in">echo</span> 2 &gt; <span class="hljs-string">&quot;/proc/sys/net/ipv6/conf/<span class="hljs-variable">$WAN6_INTERFACE</span>/accept_ra&quot;</span><br>                <span class="hljs-keyword">if</span> [ $? -eq 0 ] ; <span class="hljs-keyword">then</span><br>                        logger -t NAT6 <span class="hljs-string">&quot;Accepting router advertisements on <span class="hljs-variable">$WAN6_INTERFACE</span> even if forwarding is enabled (required for temporary addresses)&quot;</span><br>                <span class="hljs-keyword">else</span><br>                        logger -t NAT6 <span class="hljs-string">&quot;Error: Failed to change router advertisements accept policy on <span class="hljs-variable">$WAN6_INTERFACE</span> (required for temporary addresses)&quot;</span><br>                <span class="hljs-keyword">fi</span><br>                <span class="hljs-built_in">echo</span> 2 &gt; <span class="hljs-string">&quot;/proc/sys/net/ipv6/conf/<span class="hljs-variable">$WAN6_INTERFACE</span>/use_tempaddr&quot;</span><br>                <span class="hljs-keyword">if</span> [ $? -eq 0 ] ; <span class="hljs-keyword">then</span><br>                        logger -t NAT6 <span class="hljs-string">&quot;Using temporary addresses for outgoing connections on interface <span class="hljs-variable">$WAN6_INTERFACE</span>&quot;</span><br>                <span class="hljs-keyword">else</span><br>                        logger -t NAT6 <span class="hljs-string">&quot;Error: Failed to enable temporary addresses for outgoing connections on interface <span class="hljs-variable">$WAN6_INTERFACE</span>&quot;</span><br>                <span class="hljs-keyword">fi</span><br>        <span class="hljs-keyword">fi</span><br> <br>        <span class="hljs-built_in">exit</span> 0<br>&#125;<br></code></pre></td></tr></table></figure>

<p>当然，为了让该脚本能够运行，还必须要修改权限。并且，存放在<code>/etc/init.d</code>中的脚本作为Linux中的服务来看待，因此还需启用它。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">chmod +x /etc/init.d/nat6         <span class="hljs-comment"># 设置可执行权限</span><br>/etc/init.d/nat6 <span class="hljs-built_in">enable</span>           <span class="hljs-comment"># 启用NAT6脚本</span><br></code></pre></td></tr></table></figure>

<h3 id="（5）关闭不需要的防火墙规则"><a href="#（5）关闭不需要的防火墙规则" class="headerlink" title="（5）关闭不需要的防火墙规则"></a>（5）关闭不需要的防火墙规则</h3><p>OpenWrt的防火墙中有一个默认规则，叫<code>Allow-ICMPv6-Forward</code>。该规则在我们的实际使用中并不需要，因为我们用于IPv6内网穿透的Masquerade模块已经取代了它的功能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">uci <span class="hljs-built_in">set</span> firewall.@rule[<span class="hljs-string">&quot;<span class="hljs-subst">$(uci show firewall | grep &#x27;Allow-ICMPv6-Forward&#x27; | cut -d&#x27;[&#x27; -f2 | cut -d&#x27;]&#x27; -f1)</span>&quot;</span>].enabled=<span class="hljs-string">&#x27;0&#x27;</span><br>uci commit firewall<br></code></pre></td></tr></table></figure>

<h3 id="（6）接收广播并开启IPv6转发"><a href="#（6）接收广播并开启IPv6转发" class="headerlink" title="（6）接收广播并开启IPv6转发"></a>（6）接收广播并开启IPv6转发</h3><p>接下来要修改的文件是<code>/etc/sysctl.conf</code>，其中包含的广播和IPv6转发有关的配置需要进行调整，<strong>将它们的值都设为“<code>2</code>”</strong>：</p>
<ul>
<li><code>net.ipv6.conf.default.forwarding</code></li>
<li><code>net.ipv6.conf.all.forwarding</code></li>
<li><code>net.ipv6.conf.default.accept_ra</code></li>
<li><code>net.ipv6.conf.all.accept_ra</code></li>
</ul>
<p>一般地，上述设置需要用户手动修改。但为了实现脚本的自动化，我使用文本处理程序<code>sed</code>来进行自动替换。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash">touch /etc/sysctl.conf<br><br>a=$(sed -n <span class="hljs-string">&#x27;/net.ipv6.conf.default.forwarding/=&#x27;</span> /etc/sysctl.conf)<br><span class="hljs-keyword">if</span> [ ! <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;net.ipv6.conf.default.forwarding=2&quot;</span> &gt;&gt; /etc/sysctl.conf<br><span class="hljs-keyword">else</span><br>	sed -i <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;a&#125;</span>d; <span class="hljs-subst">$((a-1)</span>)a net.ipv6.conf.default.forwarding=2&quot;</span> /etc/sysctl.conf<br><span class="hljs-keyword">fi</span><br><br>a=$(sed -n <span class="hljs-string">&#x27;/net.ipv6.conf.all.forwarding/=&#x27;</span> /etc/sysctl.conf)<br><span class="hljs-keyword">if</span> [ ! <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;net.ipv6.conf.all.forwarding=2&quot;</span> &gt;&gt; /etc/sysctl.conf<br><span class="hljs-keyword">else</span><br>	sed -i <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;a&#125;</span>d; <span class="hljs-subst">$((a-1)</span>)a net.ipv6.conf.all.forwarding=2&quot;</span> /etc/sysctl.conf<br><span class="hljs-keyword">fi</span><br><br>a=$(sed -n <span class="hljs-string">&#x27;/net.ipv6.conf.default.accept_ra/=&#x27;</span> /etc/sysctl.conf)<br><span class="hljs-keyword">if</span> [ ! <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>	a=$(sed -n <span class="hljs-string">&#x27;/net.ipv6.conf.all.forwarding/=&#x27;</span> /etc/sysctl.conf)<br>	sed -i <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;a&#125;</span>a net.ipv6.conf.default.accept_ra=2&quot;</span> /etc/sysctl.conf<br><span class="hljs-keyword">else</span><br>	sed -i <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;a&#125;</span>d; <span class="hljs-subst">$((a-1)</span>)a net.ipv6.conf.default.accept_ra=2&quot;</span> /etc/sysctl.conf<br><span class="hljs-keyword">fi</span><br><br>a=$(sed -n <span class="hljs-string">&#x27;/net.ipv6.conf.all.accept_ra/=&#x27;</span> /etc/sysctl.conf)<br><span class="hljs-keyword">if</span> [ ! <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>	a=$(sed -n <span class="hljs-string">&#x27;/net.ipv6.conf.default.accept_ra/=&#x27;</span> /etc/sysctl.conf)<br>	sed -i <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;a&#125;</span>a net.ipv6.conf.all.accept_ra=2&quot;</span> /etc/sysctl.conf<br><span class="hljs-keyword">else</span><br>	sed -i <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;a&#125;</span>d; <span class="hljs-subst">$((a-1)</span>)a net.ipv6.conf.all.accept_ra=2&quot;</span> /etc/sysctl.conf<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<p>一般情况下，这些设置都会排在一起，所以在使用<code>sed</code>进行操作时，可以先定位到其中一个设置项，然后对其值进行修改。有些设备上的<code>/etc/sysctl.conf</code>并没有上面的设置项，因此还要考虑这一情况，在配置文件中加上相应的项——首先把<code>net.ipv6.conf.default.forwarding=2</code>加到文件尾部，然后再依次添加剩下的几项。</p>
<blockquote>
<p>TODO: 还需要讲解sed的用法！</p>
</blockquote>
<h3 id="（7）配置ip6tables，加入转发规则"><a href="#（7）配置ip6tables，加入转发规则" class="headerlink" title="（7）配置ip6tables，加入转发规则"></a>（7）配置ip6tables，加入转发规则</h3><p>最后设置ip6tables，加入IPv6 NAT转发的规则，并重启系统的防火墙服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ip6tables -t nat -I POSTROUTING -s <span class="hljs-subst">$(uci get network.globals.ula_prefix)</span> -j MASQUERADE&quot;</span> &gt;&gt; /etc/firewall.user<br>/etc/init.d/firewall restart<br></code></pre></td></tr></table></figure>

<h2 id="测试IPv6使用状况"><a href="#测试IPv6使用状况" class="headerlink" title="测试IPv6使用状况"></a>测试IPv6使用状况</h2><p>以上设置完成后，重启路由器，内网的IPv6设备就能够获得IPv6地址了。将任意一台设备连接到路由器上，打开它们的网络设置，如果得到了IPv6地址，且不是“<code>fe80</code>”开头，就说明设置成功。</p>
<p>当然，想让内网设备使用IPv6上网，就必须确定外网能否支持。一个简便的方法是，使用ssh登录路由器，然后ping谷歌的IPv6地址（<a target="_blank" rel="noopener" href="http://ipv6.google.com.hk/">http://ipv6.google.com.hk/</a> ），若能够ping通，就说明外网访问IPv6没问题。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping6 ipv6.google.com<br></code></pre></td></tr></table></figure>

<p>使用测试网站，可以更专业、更直观地检测IPv6的连接性。只要内网设备配置正确，测试均能通过：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://test-ipv6.com/">Test IPv6</a></li>
<li><a target="_blank" rel="noopener" href="http://ipv6-test.com/">IPv6 Test</a></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5168189-f1153efa564baffe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="笔者的测试结果，路由器已连接华中科技大学教育网，并已经配置好IPv6 NAT"></p>
<blockquote>
<p><strong>注：</strong></p>
<ol>
<li>“<code>fe80</code>”开头的地址是内网地址，而非公网。我路由器上的设备都能连接IPv6外网，它们的IPv6地址以 <strong>“<code>d</code>”</strong> 开头。</li>
<li>中国教育网（CERNET）支持IPv6访问。笔者的学校——华中科技大学，为教育网的重要节点，只要能登录校园网就能使用IPv6。</li>
<li>运营商网络，包括电信、联通、移动、各地广电和长城宽带，IPv6服务须额外申请，而且并不是所有地方都能办理。</li>
</ol>
</blockquote>
<h2 id="致谢与参考"><a href="#致谢与参考" class="headerlink" title="致谢与参考"></a>致谢与参考</h2><ul>
<li><strong>zqp19950813提供配置方法。</strong>本文的脚本基于他的教程编写。</li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/guituo9698/article/details/70285755">【转发】 通过openwrt的NAT6转发，使后端设备获得ipv6网络</a></li>
</ul>
<p>[^1]: 《IPv6地址》. 北海石松 - 博客园. <a target="_blank" rel="noopener" href="https://www.cnblogs.com/gogly/articles/2558150.html">https://www.cnblogs.com/gogly/articles/2558150.html</a></p>

        </div>
        
        
        
        <div class="article-tags">
            <ul class="tags-list cl">
                
                <li><a href="/tags/技术笔记/"><i class="fa fa-tag"></i>技术笔记</a></li>
                
                <li><a href="/tags/OpenWrt/"><i class="fa fa-tag"></i>OpenWrt</a></li>
                
                <li><a href="/tags/IPv6/"><i class="fa fa-tag"></i>IPv6</a></li>
                
                <li><a href="/tags/路由器/"><i class="fa fa-tag"></i>路由器</a></li>
                
            </ul>
        </div>
        
        <div class="article-pagination cl">
        
            <div class="pagination-prev">
                <a href="/2018/11/30/Struggle_with_Linux/Deepin-Linux%E4%B8%8B%E4%B8%BAWine%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94/">Deepin Linux下为Wine创建文件关联</a>
            </div>
        
        
            <div class="pagination-next">
                <a href="/2018/11/06/Struggle_with_Linux/%E4%B8%BADeepin-Linux%E7%BC%96%E8%AF%91%E5%86%85%E6%A0%B8/">为Deepin Linux编译内核</a>
            </div>
        
        </div>

        
    </div>
</article>

    </section>
    
<section class="tool-area">

    <div class="toolbar">
        

        
        <div class="widget-post widget" style="order: 1 ">
            <h2 class="widget-title"><i class="fa fa-file-text"></i> 近期文章</h2>
            <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/04/26/BlackMacOS/Tianocore_On_Hard_Drive/">把Tianocore装到GPT硬盘中，让BIOS老机器跑上UEFI</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/26/BlackMacOS/Tianocore_On_USB_Drive/">U盘安装Tianocore，让BIOS老机器跑上UEFI</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/12/Git/Git_Sync_Commits/">GitHub：如何只提交/应用指定commit（Pull Request，或更新本地代码）</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/09/Programming_Tips/Makefile_%E8%B8%A9%E5%9D%91%E8%AE%B0/">Makefile 编写时的几个大坑和技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/11/Struggle_with_Linux/%E8%A7%A3%E5%86%B3Linux%E4%B8%8Bzip%E5%8E%8B%E7%BC%A9%E5%8C%85%E4%B9%B1%E7%A0%81%E7%9A%84%E9%97%AE%E9%A2%98/">解决Linux下ZIP压缩包乱码的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/09/Linux_Audio_Production/Make_Your_ArchLinux_An_Audio_Workstation_03.md/">把Arch Linux打造成音乐工作站（三）：使用Windows下的VST插件</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/08/Linux_Audio_Production/Make_Your_ArchLinux_An_Audio_Workstation_01/">把Arch Linux打造成音乐工作站（一）：安装与配置JACK</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/25/Linux_Audio_Production/Make_Your_ArchLinux_An_Audio_Workstation_02/">把Arch Linux打造成音乐工作站（二）：安装WineASIO</a></li></ul>
        </div>
        

        
        <div class="widget-tags widget" style="order: 2 ">
            <h2 class="widget-title"><i class="fa fa-tags"></i> 标签</h2>
            <a href="/tags/ASIO/" style="font-size: 10px;">ASIO</a> <a href="/tags/Android-%E9%80%82%E9%85%8D/" style="font-size: 10px;">Android 适配</a> <a href="/tags/Android-%E9%80%82%E9%85%8D%E6%95%99%E7%A8%8B/" style="font-size: 13.33px;">Android 适配教程</a> <a href="/tags/Android-%E9%80%82%E9%85%8D%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">Android 适配笔记</a> <a href="/tags/Apache2/" style="font-size: 10px;">Apache2</a> <a href="/tags/Arch-Linux/" style="font-size: 13.33px;">Arch Linux</a> <a href="/tags/BIOS/" style="font-size: 13.33px;">BIOS</a> <a href="/tags/BusyBox/" style="font-size: 10px;">BusyBox</a> <a href="/tags/Cherry-Pick/" style="font-size: 10px;">Cherry Pick</a> <a href="/tags/Debian/" style="font-size: 10px;">Debian</a> <a href="/tags/Deepin/" style="font-size: 16.67px;">Deepin</a> <a href="/tags/Foobar2000/" style="font-size: 10px;">Foobar2000</a> <a href="/tags/GPT/" style="font-size: 10px;">GPT</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Hexo%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">Hexo插件</a> <a href="/tags/IPv6/" style="font-size: 10px;">IPv6</a> <a href="/tags/JACK/" style="font-size: 10px;">JACK</a> <a href="/tags/KDE/" style="font-size: 10px;">KDE</a> <a href="/tags/Linux/" style="font-size: 16.67px;">Linux</a> <a href="/tags/Linux-%E5%AE%89%E8%A3%85/" style="font-size: 10px;">Linux 安装</a> <a href="/tags/MBR/" style="font-size: 13.33px;">MBR</a> <a href="/tags/Mac-OS/" style="font-size: 10px;">Mac OS</a> <a href="/tags/Makefile/" style="font-size: 10px;">Makefile</a> <a href="/tags/NAS/" style="font-size: 10px;">NAS</a> <a href="/tags/OMV/" style="font-size: 10px;">OMV</a> <a href="/tags/OpenSUSE/" style="font-size: 10px;">OpenSUSE</a> <a href="/tags/OpenWrt/" style="font-size: 10px;">OpenWrt</a> <a href="/tags/Openmediavault/" style="font-size: 10px;">Openmediavault</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Pull-Request/" style="font-size: 10px;">Pull Request</a> <a href="/tags/PyAudio/" style="font-size: 10px;">PyAudio</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/RIME/" style="font-size: 10px;">RIME</a> <a href="/tags/SDL/" style="font-size: 10px;">SDL</a> <a href="/tags/Snap/" style="font-size: 10px;">Snap</a> <a href="/tags/Snapd/" style="font-size: 10px;">Snapd</a> <a href="/tags/TWRP/" style="font-size: 13.33px;">TWRP</a> <a href="/tags/UEFI/" style="font-size: 13.33px;">UEFI</a> <a href="/tags/Ubuntu/" style="font-size: 13.33px;">Ubuntu</a> <a href="/tags/VSCode/" style="font-size: 10px;">VSCode</a> <a href="/tags/VST/" style="font-size: 10px;">VST</a> <a href="/tags/Wine/" style="font-size: 13.33px;">Wine</a> <a href="/tags/ZIP/" style="font-size: 10px;">ZIP</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/%E4%B9%B1%E7%A0%81/" style="font-size: 10px;">乱码</a> <a href="/tags/%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">使用技巧</a> <a href="/tags/%E5%86%85%E6%A0%B8/" style="font-size: 10px;">内核</a> <a href="/tags/%E5%8E%8B%E7%BC%A9%E5%8C%85/" style="font-size: 10px;">压缩包</a> <a href="/tags/%E5%9E%82%E7%9B%B4%E5%90%8C%E6%AD%A5/" style="font-size: 10px;">垂直同步</a>
        </div>
        

        
        <div class="widget-categories widget" style="order: 3 ">
            <h2 class="widget-title"><i class="fa fa-folder-open"></i> 分类</h2>
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/%E9%80%82%E9%85%8D/">适配</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/%E9%80%82%E9%85%8D/%E6%95%99%E7%A8%8B/">教程</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/%E9%80%82%E9%85%8D/%E7%AC%94%E8%AE%B0/">笔记</a><span class="category-list-count">7</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/%E6%8F%92%E4%BB%B6/">插件</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">12</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Arch-Linux/">Arch Linux</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Deepin/">Deepin</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/OpenSUSE/">OpenSUSE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Ubuntu/">Ubuntu</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Ubuntu/Snap/">Snap</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/npm/">npm</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/">安装配置</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SDL/">SDL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Switch/">Switch</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Switch/%E5%BC%80%E5%8F%91/">开发</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Mac-OS/">Mac OS</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Mac-OS/%E9%BB%91%E8%8B%B9%E6%9E%9C/">黑苹果</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/UEFI/">UEFI</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8E%A9%E8%BD%ACNAS/">玩转NAS</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8E%A9%E8%BD%ACNAS/Openmediavault/">Openmediavault</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%B5%E8%84%91%E7%BB%B4%E4%BF%AE/">电脑维修</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%B5%E8%84%91%E7%BB%B4%E4%BF%AE/%E6%95%85%E9%9A%9C%E8%A7%A3%E5%86%B3/">故障解决</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E7%BB%8F%E9%AA%8C/">编程经验</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E7%BB%8F%E9%AA%8C/Makefile/">Makefile</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/%E8%B7%AF%E7%94%B1%E5%99%A8/">路由器</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87%E6%8A%A5%E5%91%8A/">论文报告</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87%E6%8A%A5%E5%91%8A/%E5%8F%8C%E5%AD%A6%E4%BD%8D%E8%AE%BA%E6%96%87/">双学位论文</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9F%B3%E4%B9%90%E5%88%B6%E4%BD%9C/">音乐制作</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9F%B3%E4%B9%90%E5%88%B6%E4%BD%9C/Linux%E4%B8%8B%E5%81%9A%E9%9F%B3%E4%B9%90/">Linux下做音乐</a><span class="category-list-count">3</span></li></ul></li></ul>
        </div>
        

    </div>
</section>
</div>

    
        <footer class="footer">
	<p class="footer-intro">
		
		@2022 爱拼安小匠的技术博客.
	</p>
	<p class="footer-intro">
			Powered By <a href="https://hexo.io/zh-cn/" target="_blank">hexo</a>
			theme <a href="https://github.com/iengu/hexo-theme-mokusei" target="_blank">mokusei</a> by <a href="https://www.iengu.com" target="blank">iengu</a>
	</p>
</footer>




        <div class="extend-tools" id="extend-tools" style="display: none;">
    <ul>
        <li class="tools-returnTop" title="返回顶部"><i class="fa fa-angle-double-up"></i></li>
    </ul>
</div>

	</div>

	
<script src="/js/org/jquery.min.js"></script>

    
<script src="/js/extend.js"></script>

</body>
</html>